# 计算机工作原理
中央处理器(CPU)是一台计算机的运算核心和控制核心
CPU,内部存储器和输入/输出设备是电子计算机三大核心部件

## CPU核心组件
### 算数逻辑单元(Arithmetic&logical Unit)
中央处理器的执行单元,所有中央处理器的核心组成部分,由`AndGate`(与门)&`OrGate`(或门)构成的算术逻辑单元,主要功能是进行二位元的算术运算,如加减乘(不包括整数除法)
#### PC
负责存储内存地址,该地址指向下一条即将执行的指令
#### 寄存器(Register)
CPU内部元件,在寄存器之间数据传送非常快
用途:
* 可将寄存器内的数据执行算术及逻辑运算
* 存于寄存器内的地址可用来执行内存的某个位置,即寻址
* 用来读写数据到电脑的周边设备
#### 缓存(Cache)

### 内存(Memory)
也称`内存储器`&`主存储器` ,它用于暂时存放CPU中的运算数据,与硬盘等外部存储器交换的数据

## 磁盘
### 盘片,片面,磁头
硬盘中一般会有多个盘片组成,每个盘片包含两个面,每个盘面都对应地有一个读/写磁头

### 扇区和磁道
盘面从圆心向外画直线,可以将磁道划分为若干个弧段,每个磁道上一个弧段被称为一个扇区,扇区是磁盘的最小组成单元,通常是512字节(由于不断提高磁盘的大小,部分厂商设定每个扇区的大小为44096字节)

通过磁头和磁道的接触,进行数据的读写

### 磁头和柱面
硬盘通常由重叠的一组盘片构成,每个盘面都被划分为数目相等的磁道,并从边缘的`0`开始编号,具有相同编号的磁道形成一个圆柱,称之为磁盘的柱面,磁盘的柱面数与一个盘面上从磁道数相等

### 磁盘容量计算
存储容量 = 磁头数 * 磁道(柱面)数 * 每道扇区数 * 每扇区字节数

### 磁盘读取响应时间
* 寻道时间: 磁头从开始移动到数据所在磁道所需要的时间,寻道时间越短,I/O操作越快
* 旋转延迟: 盘片旋转将请求数据所在扇区移至读写磁头下方所需要的时间,旋转延迟取决与磁盘转速
* 数据传输时间: 完成传输所请求的数据需要的时间

读写一次磁盘信息所需的时间可分解为: 寻道时间,延迟时间,传输时间.为提高磁盘传输效率,软件应着重考虑减少寻道时间和延迟时间

### 块/簇群
块是操作系统中最小的逻辑存储单位.操作系统与磁盘打交道的最小单位是磁盘块,每个块可包括2,4,8,16,32,64...2的n次方个扇区

#### 为什么存磁盘块
读取方便: 由于扇区的数量比较小,数目众多在寻址时比较困难,所以操作系统就将相邻的扇区组合在一起,形成一个块,再对块进行整体操作
分离对底层的依赖: 操作系统忽略对底层物理存储结构的设计,通过虚拟出来磁盘块的概念,在系统中认为块是最小的单位

### page
操作系统经常与内存和硬盘这两种存储设备进行通信,与内存操作,是虚拟一个页的概念来作为最小单位,与硬盘打交道,是以块为最小单位

### 扇区,块/簇,page的关系
* 扇区: 硬盘的最小读写单元
* 块/簇: 是操作系统针对硬盘读写的最小单元
* page: 是内存与操作系统之间操作的最小单元

扇区 <= 块/簇 <= page

### 计算机读取数据流程
当需要从磁盘读取数据时,系统会将数据地址传给`磁盘`,即确定要读的数据在哪个磁道,哪个扇区.为了读取这个扇区的数据,需要将磁头放到这个扇区的`上方`,为了实现这点,磁头需要移动对准相应磁道,这个过程称为`寻道`,所耗费时间为`寻道时间`,然后磁盘旋转将目标扇区旋转到磁头下,这个过程耗费的时间叫做`旋转时间`

## 局部性原理
由于存储介质的特性,磁盘本身存取比主存慢很多,再加上机械运动耗费,磁盘的存取速度往往是主存的十万分之一,因此为了提高效率,要`尽量减少磁盘I/O`,为了达到这个目的,磁盘往往不是严格按需读取,而是每次都会预读,即使只需要一个字节,磁盘也会从这个位置开始,顺序向后读取一定长度的数据放入内存

## 磁盘预读
当一个数据被用到时,其附近的数据也通常会马上被使用.程序运行期间所需要的数据通常比较集中.由于磁盘顺序读取的效率很高(不需要寻道时间,只需很少的旋转时间),因此对于具有局部性的程序来说,预读可以提高I/O效率
预读的长度一般为页(page)的整数倍,页是计算机管理存储器的逻辑块,硬件及操作系统往往将主存和磁盘存储区分割为连续的大小相等的块,每个存储块称为一页,主存和磁盘以页为单位交换数据,当程序要读取的数据不在主存中,会触发一个缺页异常,此时系统会向磁盘发出读盘信号,磁盘会找到数据的起始位置并向后连续读取一页或几页载入内存中,然后异常返回,程序继续运行

## 磁盘IO
mysql的数据一般以文件形式存储在磁盘上,检索需要磁盘I/O操作.与主存不同,磁盘I/O存在机械运动耗费,因此磁盘I/O的时间消耗是巨大的
